<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>أسئلة الكتاب المقدس ✝️</title>
  <style>
    body {
      background-color: #0a0a1a;
      color: #ffffff;
      font-family: 'Arial', sans-serif;
      text-align: center;
      padding: 20px;
      margin: 0;
      overflow-x: hidden;
      position: relative;
      min-height: 100vh;
    }
   
    .cross {
      position: absolute;
      color: rgba(76, 201, 240, 0.3);
      font-size: 30px;
      animation: float 8s linear infinite;
      z-index: -1;
      pointer-events: none;
    }
   
    @keyframes float {
      0% {
        transform: translateY(100vh) translateX(0) rotate(0deg);
        opacity: 0;
      }
      20% {
        opacity: 0.3;
      }
      80% {
        opacity: 0.3;
      }
      100% {
        transform: translateY(-100px) translateX(100px) rotate(360deg);
        opacity: 0;
      }
    }
   
    .developer-card {
      position: fixed;
      bottom: 15px;
      left: 15px;
      background: rgba(10, 10, 30, 0.8);
      border: 1px solid #4cc9f0;
      border-radius: 12px;
      padding: 10px 12px;
      box-shadow: 0 0 10px rgba(76, 201, 240, 0.3);
      z-index: 100;
      direction: ltr;
      text-align: left;
      backdrop-filter: blur(5px);
      transition: all 0.3s ease;
      font-size: 14px;
    }
   
    .developer-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 0 15px rgba(76, 201, 240, 0.5);
    }
   
    .dev-title {
      font-size: 12px;
      color: #4cc9f0;
      margin-bottom: 2px;
      font-weight: bold;
    }
   
    .dev-name {
      font-size: 15px;
      color: white;
      margin-bottom: 5px;
      font-weight: bold;
    }
   
    .contact-container {
      display: flex;
      align-items: center;
      gap: 6px;
    }
   
    .whatsapp-btn {
      display: flex;
      align-items: center;
      gap: 4px;
      background: #25D366;
      color: white;
      padding: 4px 8px;
      border-radius: 15px;
      text-decoration: none;
      font-size: 12px;
      transition: all 0.3s;
    }
   
    .whatsapp-btn:hover {
      background: #128C7E;
      transform: scale(1.05);
    }
   
    .whatsapp-icon {
      width: 14px;
      height: 14px;
      filter: drop-shadow(0 0 2px rgba(255, 255, 255, 0.5));
    }
   
    .phone-number {
      font-family: 'Courier New', monospace;
      font-size: 13px;
      color: white;
      direction: ltr;
      display: inline-block;
      margin-left: 3px;
    }
   
    .question, .result, #start-screen {
      margin: 20px auto;
      max-width: 800px;
      background-color: rgba(10, 10, 30, 0.7);
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
    }
   
    .answers {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
    }
   
    .answers button {
      background-color: #16213e;
      color: white;
      border: 1px solid #4cc9f0;
      padding: 12px 20px;
      cursor: pointer;
      border-radius: 8px;
      font-size: 16px;
      transition: all 0.3s;
      min-width: 120px;
    }
   
    .answers button:hover {
      background-color: #4cc9f0;
      color: #16213e;
    }
   
    input {
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #4cc9f0;
      font-size: 16px;
      margin: 10px;
      background-color: #16213e;
      color: white;
      width: 250px;
    }
   
    button#start-button {
      background-color: #4CAF50;
      color: white;
      padding: 15px 30px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 20px;
    }
   
    h1 {
      color: #4cc9f0;
      font-size: 28px;
      margin-bottom: 15px;
    }
   
    h2 {
      font-size: 22px;
      margin-bottom: 15px;
      color: #ffffff;
    }
   
    .bible-verse {
      font-style: italic;
      color: #4cc9f0;
      margin-top: 15px;
      font-size: 16px;
    }
   
    .hidden {
      display: none;
    }
   
    /* أنماط التصنيف في الصفحة الرئيسية */
    .main-leaderboard {
      margin: 30px auto;
      max-width: 800px;
      background-color: rgba(10, 10, 30, 0.7);
      padding: 15px;
      border-radius: 15px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
    }
   
    .main-leaderboard h3 {
      color: #4cc9f0;
      margin: 0 0 15px 0;
      font-size: 20px;
      text-align: center;
      border-bottom: 1px solid #4cc9f0;
      padding-bottom: 8px;
    }
   
    .player-score {
      display: flex;
      justify-content: space-between;
      padding: 8px 10px;
      border-bottom: 1px solid rgba(76, 201, 240, 0.2);
      font-size: 16px;
      transition: all 0.3s;
    }
   
    .player-score:hover {
      background: rgba(76, 201, 240, 0.1);
    }
   
    .player-score:last-child {
      border-bottom: none;
    }
   
    .player-name {
      color: white;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 60%;
    }
   
    .player-points {
      color: #4cc9f0;
      font-weight: bold;
      margin-left: 10px;
    }
   
    .rank-1 {
      background: rgba(255, 215, 0, 0.15);
      border-right: 3px solid gold;
    }
   
    .rank-2 {
      background: rgba(192, 192, 192, 0.15);
      border-right: 3px solid silver;
    }
   
    .rank-3 {
      background: rgba(205, 127, 50, 0.15);
      border-right: 3px solid #cd7f32;
    }
   
    .no-scores {
      text-align: center;
      color: #aaa;
      padding: 20px;
      font-size: 16px;
    }
    
    /* أنماط جديدة لعرض الأجوبة الخاطئة */
    .wrong-answers-section {
      margin-top: 30px;
      text-align: right;
      background: rgba(255, 0, 0, 0.1);
      padding: 15px;
      border-radius: 10px;
      border-right: 3px solid #ff4d4d;
    }
    
    .wrong-answers-title {
      color: #ff4d4d;
      font-size: 18px;
      margin-bottom: 10px;
    }
    
    .wrong-answer-item {
      margin-bottom: 10px;
      padding: 10px;
      background: rgba(255, 77, 77, 0.1);
      border-radius: 5px;
    }
    
    .question-text {
      font-weight: bold;
      margin-bottom: 5px;
    }
    
    .your-answer {
      color: #ff4d4d;
    }
    
    .correct-answer {
      color: #4cc9f0;
    }
    
    .show-answers-btn {
      background: #ff4d4d;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s;
    }
    
    .show-answers-btn:hover {
      background: #ff3333;
    }
  </style>
</head>
<body>
  <div id="crosses-container"></div>
 
  <!-- بطاقة المطور -->
  <div class="developer-card">
    <div class="dev-title">Developer</div>
    <div class="dev-name">Abram</div>
    <div class="contact-container">
      <a href="https://wa.me/201204625935" target="_blank" class="whatsapp-btn">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" class="whatsapp-icon" alt="WhatsApp">
        Chat
      </a>
      <span class="phone-number">+201204625935</span>
    </div>
  </div>

  <div id="start-screen">
    <h1>مرحبًا بكم في أسئلة الكتاب المقدس ✝️</h1>
    <p>اختبر معرفتك بالكتاب المقدس</p>
    <input type="text" id="player-name" placeholder="اسمك الكريم" required />
    <br />
    <button id="start-button" onclick="startGame()">ابدأ اللعبة</button>
   
    <!-- لوحة المتصدرين في الصفحة الرئيسية -->
    <div class="main-leaderboard" id="main-leaderboard">
      <h3>أفضل اللاعبين</h3>
      <div id="leaderboard-content"></div>
    </div>
  </div>

  <div id="question-container" class="hidden"></div>

  <div id="result" class="result hidden"></div>

  <audio id="win-sound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" preload="auto"></audio>

  <script>
    // متغير لتخزين بيانات اللاعبين
    let players = JSON.parse(localStorage.getItem('bibleQuizPlayers')) || [];
    
    // متغير لتخزين الأجوبة الخاطئة
    let wrongAnswers = [];
   
    let currentQuestion = 0;
    let score = 0;
    let playerName = '';

    function createCrosses() {
      const container = document.getElementById('crosses-container');
      const crossCount = 30;
     
      for (let i = 0; i < crossCount; i++) {
        const cross = document.createElement('div');
        cross.className = 'cross';
        cross.innerHTML = '✝';
        cross.style.left = Math.random() * 100 + 'vw';
        cross.style.top = Math.random() * 100 + 'vh';
        cross.style.animationDuration = 5 + Math.random() * 10 + 's';
        cross.style.animationDelay = Math.random() * 5 + 's';
        cross.style.fontSize = 20 + Math.random() * 30 + 'px';
        container.appendChild(cross);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      createCrosses();
      updateLeaderboard();
     
      const playerNameInput = document.getElementById('player-name');
      playerNameInput.addEventListener('focus', function() {
        window.scrollTo(0, 0);
        document.body.scrollTop = 0;
      });
    });

    const questions = [
      {
        text: () => 'كم عدد أسفار الكتاب المقدس؟',
        options: ['66 سفر', '73 سفر', '27 سفر'],
        correct: '66 سفر',
        verse: 'كل الكتاب هو موحى به من الله (2 تيموثاوس 3: 16)'
      },
      {
        text: () => 'من هو أول شخص ذكر في الكتاب المقدس؟',
        options: ['آدم', 'نوح', 'إبراهيم'],
        correct: 'آدم',
        verse: 'فخلق الله الإنسان على صورته (تكوين 1: 27)'
      },
      {
        text: () => 'من قتل جليات الجبار؟',
        options: ['شاؤول', 'داود', 'سليمان'],
        correct: 'داود',
        verse: 'فقال داود للفلسطيني: أنت تأتي إلي بسيف ورمح، أما أنا فآتي إليك باسم رب الجنود (1 صموئيل 17: 45)'
      },
      {
        text: () => 'من هو أبو المؤمنين؟',
        options: ['موسى', 'إبراهيم', 'يعقوب'],
        correct: 'إبراهيم',
        verse: 'فآمن إبراهيم بالله فحسب له برًا (تكوين 15: 6)'
      },
      {
        text: () => 'أين ولد يسوع المسيح؟',
        options: ['الناصرة', 'بيت لحم', 'أورشليم'],
        correct: 'بيت لحم',
        verse: 'وولدت ابنها البكر وقمطته وأضجعته في المذود (لوقا 2: 7)'
      },
      {
        text: () => 'كم عدد التلاميذ الذين اختارهم يسوع؟',
        options: ['7', '12', '40'],
        correct: '12',
        verse: 'ودعا تلاميذه الاثني عشر (متى 10: 1)'
      },
      {
        text: () => 'من أنكر يسوع ثلاث مرات؟',
        options: ['يوحنا', 'بطرس', 'يهوذا'],
        correct: 'بطرس',
        verse: 'قال له بطرس: لو كان الجميع يعثرون بسببك، فأنا لا أعثر أبدًا (متى 26: 33)'
      },
      {
        text: () => 'ما هي أول معجزة صنعها يسوع؟',
        options: ['إشباع الخمسة آلاف', 'تحويل الماء إلى خمر', 'إقامة لعازر'],
        correct: 'تحويل الماء إلى خمر',
        verse: 'هذه بداية الآيات فعلها يسوع في قانا الجليل (يوحنا 2: 11)'
      },
      {
        text: () => 'من كتب معظم رسائل العهد الجديد؟',
        options: ['بطرس', 'بولس', 'يوحنا'],
        correct: 'بولس',
        verse: 'بولس، عبد ليسوع المسيح، المدعو رسولًا (رومية 1: 1)'
      },
      {
        text: () => 'ما هو آخر سفر في الكتاب المقدس؟',
        options: ['رؤيا يوحنا', 'يهوذا', 'يوحنا الثالثة'],
        correct: 'رؤيا يوحنا',
        verse: 'نعمة ربنا يسوع المسيح مع جميعكم. آمين (رؤيا 22: 21)'
      },
      {
        text: () => 'من كان أول شهيد للمسيحية؟',
        options: ['استفانوس', 'يعقوب', 'بولس'],
        correct: 'استفانوس',
        verse: 'ورأوا وجهه كأنه وجه ملاك (أعمال 6: 15)'
      },
      {
        text: () => 'أين أعطيت الوصايا العشر؟',
        options: ['جبل صهيون', 'جبل سيناء', 'جبل الزيتون'],
        correct: 'جبل سيناء',
        verse: 'وكلم الله جميع هذه الكلمات قائلاً (خروج 20: 1)'
      },
      {
        text: () => 'من الذي فسر حلم فرعون؟',
        options: ['موسى', 'يوسف', 'دانيال'],
        correct: 'يوسف',
        verse: 'أليس لله التفسير؟ (تكوين 40: 8)'
      },
      {
        text: () => 'ما هي أطول صلاة في الكتاب المقدس؟',
        options: ['صلاة يسوع في بستان جثسيماني', 'صلاة حنة', 'صلاة يوحنا 17'],
        correct: 'صلاة يوحنا 17',
        verse: 'تكلم يسوع بهذا ورفع عينيه نحو السماء وقال: أيها الآب قد أتت الساعة (يوحنا 17: 1)'
      },
      {
        text: () => 'ما هو درب الخلاص حسب الكتاب المقدس؟',
        options: ['آمن بالرب يسوع المسيح فتخلص', 'اعمل أعمالاً صالحة', 'كن عضوًا في الكنيسة'],
        correct: 'آمن بالرب يسوع المسيح فتخلص',
        verse: 'آمن بالرب يسوع المسيح فتخلص أنت وأهل بيتك (أعمال 16: 31)'
      }
    ];

    function startGame() {
      playerName = document.getElementById('player-name').value.trim();
     
      if (!playerName) {
        alert('من فضلك اكتب اسمك');
        return;
      }
     
      // إعادة تعيين الأجوبة الخاطئة عند بدء لعبة جديدة
      wrongAnswers = [];
     
      // إخفاء لوحة المتصدرين عند بدء اللعبة
      document.getElementById('main-leaderboard').classList.add('hidden');
     
      document.getElementById('start-screen').classList.add('hidden');
      document.getElementById('question-container').classList.remove('hidden');
      showQuestion();
    }

    function showQuestion() {
      const container = document.getElementById('question-container');
      container.innerHTML = '';
     
      if (currentQuestion >= questions.length) {
        finishGame();
        return;
      }
     
      const question = questions[currentQuestion];
      const qDiv = document.createElement('div');
      qDiv.className = 'question';
      qDiv.innerHTML = `<h2>سؤال ${currentQuestion + 1}/${questions.length}: ${question.text()}</h2>`;

      const answersDiv = document.createElement('div');
      answersDiv.className = 'answers';

      question.options.forEach(opt => {
        const btn = document.createElement('button');
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(opt, question.correct, question.text());
        answersDiv.appendChild(btn);
      });

      qDiv.appendChild(answersDiv);
     
      if (question.verse) {
        const verseDiv = document.createElement('div');
        verseDiv.className = 'bible-verse';
        verseDiv.textContent = question.verse;
        qDiv.appendChild(verseDiv);
      }
     
      container.appendChild(qDiv);
    }

    function checkAnswer(selected, correct, questionText) {
      if (selected !== correct) {
        // تخزين الإجابة الخاطئة
        wrongAnswers.push({
          question: questionText,
          yourAnswer: selected,
          correctAnswer: correct
        });
      } else {
        score++;
      }
      currentQuestion++;
      showQuestion();
    }

    function finishGame() {
      document.getElementById('question-container').classList.add('hidden');
      const result = document.getElementById('result');
     
      result.classList.remove('hidden');
     
      // حفظ نتيجة اللاعب
      savePlayerResult(playerName, score);
     
      if (score === questions.length) {
        const winSound = document.getElementById('win-sound');
        winSound.play().catch(e => console.log('تعذر تشغيل الصوت:', e));
       
        result.innerHTML = `
          <h2>مبروك يا ${playerName}! كسبت بدرجة كاملة (15/15) 🎉</h2>
          <p>معرفتك العظيمة بالكتاب المقدس تفرح القلب!</p>
          <div class="bible-verse">كل الكتاب هو موحى به من الله ونافع للتعليم (2 تيموثاوس 3: 16)</div>
          <button onclick="resetGame()" style="margin-top:20px; padding:10px 20px; background:#4cc9f0; color:#16213e; border:none; border-radius:5px; cursor:pointer;">
            العودة للصفحة الرئيسية
          </button>
        `;
      } else {
        let resultHTML = `
          <h2>${playerName}، درجتك النهائية: ${score} من ${questions.length}</h2>
          <p>هذه فرصتك لقراءة المزيد من الكتاب المقدس!</p>
          <div class="bible-verse">كلمتك مصباح لرجلي ونور لسبيلي (مزمور 119: 105)</div>
        `;
        
        // إضافة قسم الأجوبة الخاطئة إذا وجدت
        if (wrongAnswers.length > 0) {
          resultHTML += `
            <div class="wrong-answers-section">
              <div class="wrong-answers-title">الأجوبة التي تحتاج مراجعة:</div>
              ${wrongAnswers.map(answer => `
                <div class="wrong-answer-item">
                  <div class="question-text">${answer.question}</div>
                  <div>إجابتك: <span class="your-answer">${answer.yourAnswer}</span></div>
                  <div>الإجابة الصحيحة: <span class="correct-answer">${answer.correctAnswer}</span></div>
                </div>
              `).join('')}
            </div>
          `;
        }
        
        resultHTML += `
          <button onclick="resetGame()" style="margin-top:20px; padding:10px 20px; background:#4cc9f0; color:#16213e; border:none; border-radius:5px; cursor:pointer;">
            العودة للصفحة الرئيسية
          </button>
        `;
        
        result.innerHTML = resultHTML;
      }
    }

    function resetGame() {
      // إعادة تعيين اللعبة
      currentQuestion = 0;
      score = 0;
      wrongAnswers = [];
      document.getElementById('player-name').value = '';
     
      // إظهار الصفحة الرئيسية ولوحة المتصدرين
      document.getElementById('start-screen').classList.remove('hidden');
      document.getElementById('main-leaderboard').classList.remove('hidden');
      document.getElementById('result').classList.add('hidden');
      document.getElementById('question-container').classList.add('hidden');
     
      // تحديث لوحة المتصدرين
      updateLeaderboard();
    }

    function savePlayerResult(name, points) {
      // التحقق إذا كان اللاعب موجود بالفعل
      const existingPlayerIndex = players.findIndex(p => p.name.toLowerCase() === name.toLowerCase());
     
      if (existingPlayerIndex !== -1) {
        // تحديث النقاط فقط إذا كانت أعلى
        if (points > players[existingPlayerIndex].points) {
          players[existingPlayerIndex].points = points;
          players[existingPlayerIndex].date = new Date().toISOString();
        }
      } else {
        // إضافة لاعب جديد فقط إذا لم يكن موجوداً
        players.push({
          name: name,
          points: points,
          date: new Date().toISOString()
        });
      }
     
      // ترتيب اللاعبين حسب النقاط (من الأعلى للأقل) ثم حسب التاريخ (الأحدث أولاً)
      players.sort((a, b) => {
        if (b.points !== a.points) {
          return b.points - a.points;
        }
        return new Date(b.date) - new Date(a.date);
      });
     
      // حفظ في localStorage
      localStorage.setItem('bibleQuizPlayers', JSON.stringify(players));
     
      // تحديث لوحة المتصدرين
      updateLeaderboard();
    }

    function updateLeaderboard() {
      const leaderboardContent = document.getElementById('leaderboard-content');
      leaderboardContent.innerHTML = '';
     
      // عرض أفضل 10 لاعبين فقط
      const topPlayers = players.slice(0, 10);
     
      if (topPlayers.length === 0) {
        leaderboardContent.innerHTML = '<div class="no-scores">لا توجد نتائج بعد</div>';
        return;
      }
     
      topPlayers.forEach((player, index) => {
        const playerDiv = document.createElement('div');
        playerDiv.className = `player-score rank-${index + 1}`;
        playerDiv.innerHTML = `
          <span class="player-name" title="${player.name}">${player.name}</span>
          <span class="player-points">${player.points}</span>
        `;
        leaderboardContent.appendChild(playerDiv);
      });
    }

    // دالة لمسح جميع النتائج (اختيارية)
    function resetAllScores() {
      if (confirm('هل أنت متأكد أنك تريد مسح جميع النتائج؟')) {
        players = [];
        localStorage.setItem('bibleQuizPlayers', JSON.stringify(players));
        updateLeaderboard();
      }
    }
  </script>
</body>
</html>
